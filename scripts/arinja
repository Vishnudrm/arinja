#!/bin/bash

set -e  # Exit on error

# Get the directory where the script is installed
SCRIPT_DIR="$(dirname "$(readlink -f "$0")")"
# Get the project root directory (parent of scripts)
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"

# Ensure we're in the right directory
if [ ! -d "$PROJECT_DIR/arinja" ]; then
    echo "Error: Could not find arinja package directory"
    exit 1
fi

# Change to the project directory
cd "$PROJECT_DIR"

# Ensure poetry is installed
if ! command -v poetry &> /dev/null; then
    echo "Error: Poetry is not installed. Please install it first."
    exit 1
fi

# Run arinja through poetry
poetry run arinja "$@"